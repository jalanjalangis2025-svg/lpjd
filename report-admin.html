<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lapor Jalan Rusak (Admin)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/form.css">
</head>

<body>

    <div class="form-container">
        <a href="/home" class="back-link">
            <i class="fas fa-arrow-left"></i> Kembali ke Dashboard
        </a>

        <div class="form-header">
            <h1>Input Data Dinas</h1>
            <p>Form input khusus admin untuk pendataan teknis kondisi jalan.</p>
        </div>

        <div class="form-card">
            <form id="adminForm">

                <!-- Section 1: Informasi Dasar -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-info-circle"></i> Informasi Dasar</h3>

                    <div class="form-group">
                        <label>Tanggal Pencatatan</label>
                        <div class="input-with-icon">
                            <i class="fas fa-calendar-alt"></i>
                            <input type="date" id="report_date" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Kecamatan</label>
                        <div class="input-with-icon">
                            <i class="fas fa-city"></i>
                            <select id="district" required>
                                <option value="">Pilih Kecamatan...</option>
                                <option value="Bonang">Bonang</option>
                                <option value="Demak">Demak</option>
                                <option value="Dempet">Dempet</option>
                                <option value="Gajah">Gajah</option>
                                <option value="Guntur">Guntur</option>
                                <option value="Karanganyar">Karanganyar</option>
                                <option value="Karangawen">Karangawen</option>
                                <option value="Karangtengah">Karangtengah</option>
                                <option value="Kebonagung">Kebonagung</option>
                                <option value="Mijen">Mijen</option>
                                <option value="Mranggen">Mranggen</option>
                                <option value="Sayung">Sayung</option>
                                <option value="Wedung">Wedung</option>
                                <option value="Wonosalam">Wonosalam</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Nama Ruas Jalan / Keterangan</label>
                        <textarea id="description" rows="2" placeholder="Contoh: Jl. Raya Demak - Kudus KM 5"
                            required></textarea>
                    </div>
                </div>

                <!-- Section 2: Data Teknis -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-ruler-combined"></i> Data Teknis Fisik</h3>

                    <div class="details-grid">
                        <div class="form-group">
                            <label>Panjang Kerusakan (m)</label>
                            <input type="number" id="damage_length" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Lebar Kerusakan (m)</label>
                            <input type="number" id="damage_width" step="0.01" placeholder="0.00">
                        </div>
                    </div>

                    <div class="details-grid">
                        <div class="form-group">
                            <label>Nilai SDI</label>
                            <input type="number" id="sdi_value" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Kategori SDI</label>
                            <select id="sdi_category">
                                <option value="">- Pilih -</option>
                                <option value="Baik">Baik</option>
                                <option value="Sedang">Sedang</option>
                                <option value="Rusak Ringan">Rusak Ringan</option>
                                <option value="Rusak Berat">Rusak Berat</option>
                            </select>
                        </div>
                    </div>

                    <div class="details-grid">
                        <div class="form-group">
                            <label>Nilai PCI</label>
                            <input type="number" id="pci_value" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Kategori PCI</label>
                            <select id="pci_category">
                                <option value="">- Pilih -</option>
                                <option value="Excellent">Excellent</option>
                                <option value="Good">Good</option>
                                <option value="Fair">Fair</option>
                                <option value="Poor">Poor</option>
                                <option value="Very Poor">Very Poor</option>
                                <option value="Serious">Serious</option>
                                <option value="Failed">Failed</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Lokasi & Foto -->
                <div class="form-section">
                    <h3 class="section-title"><i class="fas fa-map-marked-alt"></i> Lokasi & Dokumentasi</h3>

                    <div class="form-group">
                        <label>Titik Koordinat</label>
                        <button type="button" onclick="getLocation()" class="btn-primary"
                            style="margin-bottom: 10px; font-size: 1rem;">
                            <i class="fas fa-location-crosshairs"></i> Ambil Lokasi Saat Ini
                        </button>
                        <div class="details-grid">
                            <div class="input-with-icon">
                                <i class="fas fa-map-pin"></i>
                                <input type="number" id="latitude" placeholder="Latitude" step="any" required>
                            </div>
                            <div class="input-with-icon">
                                <i class="fas fa-map-pin"></i>
                                <input type="number" id="longitude" placeholder="Longitude" step="any" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Foto Dokumentasi</label>
                        <div class="file-upload-box">
                            <input type="file" id="photo" accept="image/*" capture="environment"
                                onchange="previewImage(this)">
                            <div class="upload-placeholder">
                                <i class="fas fa-camera"></i>
                                <span>Klik untuk ambil foto</span>
                            </div>
                        </div>
                        <img id="imagePreview" class="preview-image">
                    </div>
                </div>

                <button type="submit" id="submitBtn" class="btn-primary">
                    <i class="fas fa-save"></i> Simpan Data Admin
                </button>

            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase.js"></script>
    <script src="js/guard.js"></script>
    <script src="js/report.js"></script>
    <script>
        function previewImage(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var preview = document.getElementById('imagePreview');
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>

</html>